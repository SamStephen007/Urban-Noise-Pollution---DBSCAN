<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBSCAN Results</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --light: #f8f9fa;
            --dark: #212529;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .header h1 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        .plot-container {
            text-align: center;
            padding: 1.5rem;
            background-color: var(--light);
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .plot-container img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        .stat-card {
            background-color: white;
            border-radius: 8px;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary);
        }
        .stat-card h3 {
            margin-top: 0;
            color: var(--primary);
            font-size: 1rem;
        }
        .stat-card p {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0.5rem 0 0;
        }
        .actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--primary);
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            text-decoration: none;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .btn-download {
            background-color: #2ecc71;
        }
        .btn-download:hover {
            background-color: #27ae60;
        }
        .btn-new {
            background-color: #e74c3c;
        }
        .btn-new:hover {
            background-color: #c0392b;
        }
        .info-box {
            background-color: #e8f4fc;
            border-left: 4px solid var(--primary);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        footer {
            text-align: center;
            margin-top: 2rem;
            color: #6c757d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-chart-pie"></i> DBSCAN Clustering Results</h1>
            <p>Analysis of your dataset using density-based clustering</p>
        </div>

        <div class="results-container">
            <div class="info-box">
                <p>The visualization below shows the clusters identified by the DBSCAN algorithm. Points belonging to the same cluster share the same color, while noise points (if any) are typically shown in black.</p>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <h3>Clusters Found</h3>
                    <p>{{ cluster_count }}</p>
                </div>
                <div class="stat-card">
                    <h3>Noise Points</h3>
                    <p>{{ noise_points }}</p>
                </div>
                <div class="stat-card">
                    <h3>EPS Value</h3>
                    <p>{{ eps_value }}</p>
                </div>
                <div class="stat-card">
                    <h3>Min Samples</h3>
                    <p>{{ min_samples }}</p>
                </div>
            </div>

            <div class="plot-container">
                <img src="data:image/png;base64,{{ plot_url }}" alt="Cluster visualization">
            </div>

            <div class="actions">
                <a href="/download?data={{ csv_data | urlencode }}" class="btn btn-download">
                    <i class="fas fa-file-download"></i> Download Results (CSV)
                </a>
                <a href="/" class="btn btn-new">
                    <i class="fas fa-plus-circle"></i> New Analysis
                </a>
            </div>
        </div>
    </div>

    <footer>
        <p>DBSCAN Clustering Tool &copy; 2023 | Density-Based Spatial Clustering</p>
    </footer>
</body>
</html>